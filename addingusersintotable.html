<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 5px;
            text-align: left;
        }

        #block
        {
            width:100px;
            height:100px;
            background: red;
        }
    </style>
</head>

<body>
    <form id="form">
        First name: <input type="text" id="fname" name="name" autofocus="autofocus" /><br>
        <span id="fnameError" class="error"></span><br>
        Last name: <input type="text" id="lname" name="name" /><br>
        <span id="lnameError" class="error"></span><br>
        Age: <input type="text" id="age" name="age" /><br>
        <span id="ageError" class="error"></span><br>
        Email: <input type="text" id="email" name="email" /><br>
        <span id="emailError" class="error"></span><br>
    </form>
    <table id="table">
        <thead>
            <th>FirstName</th>
            <th>LastName</th>
            <th>Age</th>
            <th>Email</th>
        </thead>
        <tbody>

        </tbody>
    </table>
    <button id="btn">Add user</button>
    <button id="btn1">Delete user</button>
    <button id="btn2">submit</button>
    <script>
        document.getElementById('fname').addEventListener("input", validateFirstname);
        document.getElementById('lname').addEventListener("input", validateLastname);
        document.getElementById('age').addEventListener("input", validateAge);
        document.getElementById('email').addEventListener("input", validateEmail);
        document.getElementById('btn').addEventListener("click",addUser);
        document.getElementById("btn1").addEventListener("click",delUser);
        document.getElementById("btn2").addEventListener("click",validateForm);
        document.getElementById("btn2").addEventListener("click",onSubmit);
        function addUser() {
            let firstname = document.getElementById("fname").value;
            let lastname = document.getElementById("lname").value;
            let age = document.getElementById("age").value;
            let email = document.getElementById("email").value;
            let table = document.getElementById("table");
            let row = table.insertRow(-1);
            let cell1 = row.insertCell(0);
            let cell2 = row.insertCell(1);
            let cell3 = row.insertCell(2);
            let cell4 = row.insertCell(3);

            cell1.innerHTML = firstname.toUpperCase();
            cell2.innerHTML = lastname.toUpperCase();
            cell3.innerHTML = age;
            cell4.innerHTML = email;

            console.log(firstname.toUpperCase());
            console.log(lastname.toUpperCase());
            console.log(age);
            console.log(email);
            document.getElementById("form").reset();
        }

        function delUser() {
            let table = document.getElementById("table");
            let rowCount = table.rows.length;

            if (rowCount > 1) {
                table.deleteRow(rowCount - 1);
            } else {
                alert("Cannot delete the last row.");
            }
        }

        function validateFirstname() 
        {
            let firstname = document.getElementById("fname").value;
            const fnameError = document.getElementById("fnameError");
            const fnamePattern = /^[A-Za-z]+([- ]?[A-Za-z]+)*$/;
            
            if(firstname === '' || firstname === null)
            {
                fnameError.innerHTML = "Enter your firstname";
                fnameError.style.color = "red";
                return false;
            }
            else
            {
                fnameError.innerHTML = "";
            }

            if(!fnamePattern.test(firstname))
            {
                fnameError.innerHTML = "Only Alphabets";
                fnameError.style.color = "red";
                return false;
            }
        }

        function validateLastname() 
        {
            let lastname = document.getElementById("lname").value;
            const lnameError = document.getElementById("lnameError");
            const lnamePattern = /^[A-Za-z]+([- ]?[A-Za-z]+)*$/;
            
            if(lastname === '' || lastname === null)
            {
                lnameError.innerHTML = "Enter your firstname";
                lnameError.style.color = "red";
                return false;
            }
            else
            {
                lnameError.innerHTML = "";
            }

            if(!lnamePattern.test(lastname))
            {
                lnameError.innerHTML = "Only Alphabets";
                lnameError.style.color = "red";
                return false;
            }
        }

        function validateAge() 
        {
            let Age = document.getElementById("age").value;
            const ageError = document.getElementById("ageError");
            const agePattern = /^\d+$/;

    
        if(Age === '' || Age === null)
        {
            ageError.innerHTML = "Enter your firstname";
            ageError.style.color = "red";
            return false;
        }
        else
        {
            ageError.innerHTML = "";
        }

        if(!agePattern.test(Age))
        {
            ageError.innerHTML = "Only Numbers";
            ageError.style.color = "red";
            return false;
        }
        }

        function validateEmail()
        {
            let email = document.getElementById("email").value;
            const emailError = document.getElementById('emailError');
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if(email === '' || email === null)
            {
                emailError.innerHTML = "Email is missing";
                emailError.style.color = "red";
                return false;
            }
            else
            {
                emailError.innerHTML = "";
            }

            if(!emailPattern.test(email))
            {
                emailError.innerHTML = "Email dosen't match";
                emailError.style.color = "red";
                return false;
            }
        }

        function onSubmit(e)
        {
            e.preventDefault();
            let email = document.getElementById("email").value;
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if(email != emailPattern)
            {
                document.getElementById("form").reset();
                alert("Enter correct email");
            }
        }
        function validateForm()
        {
            validateEmail();
            validateFirstname();
            validateLastname();
            validateAge();
            onSubmit();
            addUser();
            delUser();
        }
    </script>
</body>
</html>
